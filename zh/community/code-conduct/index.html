<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="Apache ShenYu (Incubating) Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="Apache ShenYu (Incubating) Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Apache ShenYu (Incubating)" href="/zh/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/zh/news/rss.xml" title="Apache ShenYu (Incubating) Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/news/atom.xml" title="Apache ShenYu (Incubating) Blog Atom Feed"><title data-react-helmet="true">编码指南 | Apache ShenYu (Incubating)</title><meta data-react-helmet="true" property="og:url" content="https://shenyu.apache.org//zh/community/code-conduct"><meta data-react-helmet="true" name="docsearch:language" content="zh"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-community-current"><meta data-react-helmet="true" property="og:title" content="编码指南 | Apache ShenYu (Incubating)"><meta data-react-helmet="true" name="description" content="Apache ShenYu 编码指南"><meta data-react-helmet="true" property="og:description" content="Apache ShenYu 编码指南"><link data-react-helmet="true" rel="shortcut icon" href="/zh/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://shenyu.apache.org//zh/community/code-conduct"><link data-react-helmet="true" rel="alternate" href="https://shenyu.apache.org//community/code-conduct" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://shenyu.apache.org//zh/community/code-conduct" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://shenyu.apache.org//community/code-conduct" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://NVVPQWV3R7-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/zh/assets/css/styles.3107bf22.css">
<link rel="preload" href="/zh/assets/js/runtime~main.22032180.js" as="script">
<link rel="preload" href="/zh/assets/js/main.fac650fc.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarContent_3EUC announcementBarCloseable_3myR">⭐️ &nbsp; If you like Apache ShenYu (Incubating), give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/apache/incubator-shenyu">GitHub</a></div><button type="button" class="announcementBarClose_38nx clean-btn" aria-label="Close"><span aria-hidden="true">×</span></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><img src="/zh/img/logo.png" alt="Apache ShenYu Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh/img/logo.png" alt="Apache ShenYu Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/zh/docs/index">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/community/subscribe-email">社区</a><a class="navbar__item navbar__link" href="/zh/news">新闻</a><a class="navbar__item navbar__link" href="/zh/blog">博客</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__item navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/zh/docs/index">2.4.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/docs/next/index">当前版本</a></li><li><a class="dropdown__link" href="/zh/docs/index">2.4.0</a></li><li><a class="dropdown__link" href="/zh/docs/2.3.0/index">2.3.0</a></li><li><a class="dropdown__link" href="/zh/versions">All versions</a></li></ul></div><a href="https://github.com/apache/incubator-shenyu" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg t="1631348384596" class="icon" viewBox="0 0 1024 1024" version="1.1" style="vertical-align:text-bottom;margin-right:5px" p-id="557" width="20" height="20"><path d="M547.797333 638.208l-104.405333-103.168 1.237333-1.28a720.170667 720.170667 0 0 0 152.490667-268.373333h120.448V183.082667h-287.744V100.906667H347.605333v82.218666H59.818667V265.386667h459.178666a648.234667 648.234667 0 0 1-130.304 219.946666 643.242667 643.242667 0 0 1-94.976-137.728H211.541333a722.048 722.048 0 0 0 122.453334 187.434667l-209.194667 206.378667 58.368 58.368 205.525333-205.525334 127.872 127.829334 31.232-83.84m231.424-208.426667h-82.218666l-184.96 493.312h82.218666l46.037334-123.306667h195.242666l46.464 123.306667h82.218667l-185.002667-493.312m-107.690666 287.744l66.56-178.005333 66.602666 178.005333z" fill="currentColor" p-id="558"></path></svg><span>简体中文</span></span></a><ul class="dropdown__menu"><li><a href="/community/code-conduct" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/zh/community/code-conduct" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">简体中文</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/zh/community/subscribe-email">订阅邮件</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/zh/community/code-conduct">编码指南</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/community/issue-pr">问题及提交请求</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/community/contributor">贡献者指南</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/community/committer">提交者指南</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/community/release-guide">发布指南</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/community/vote-committer">提名新的Committer</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/community/two-fa">双因素认证</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/community/icla">签署ICLA指南</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/community/contributors">贡献者</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/community/user-registration">用户登记</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/community/release-notes">版本发布</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">编码指南</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="开发理念"></a>开发理念<a class="hash-link" href="#开发理念" title="Direct link to heading">#</a></h2><ul><li><strong>用心</strong> 保持责任心和敬畏心，以工匠精神持续雕琢。</li><li><strong>可读</strong> 代码无歧义，通过阅读而非调试手段浮现代码意图。</li><li><strong>整洁</strong> 认同《重构》和《代码整洁之道》的理念，追求整洁优雅代码。</li><li><strong>一致</strong> 代码风格、命名以及使用方式保持完全一致。</li><li><strong>精简</strong> 极简代码，以最少的代码表达最正确的意思。高度复用，无重复代码和配置。及时删除无用代码。</li><li><strong>抽象</strong> 层次划分清晰，概念提炼合理。保持方法、类、包以及模块处于同一抽象层级。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="代码提交行为规范"></a>代码提交行为规范<a class="hash-link" href="#代码提交行为规范" title="Direct link to heading">#</a></h2><ul><li>确保通过全部测试用例，确保执行<code>./mvnw clean install</code>可以编译和测试通过。</li><li>确保覆盖率不低于master分支。</li><li>确保使用Checkstyle检查代码，违反验证规则的需要有特殊理由。模板位置在<code>https://github.com/apache/incubator-shenyu/blob/master/script/shenyu_checkstyle.xml</code>，请使用checkstyle 8.8运行规则。</li><li>应尽量将设计精细化拆分；做到小幅度修改，多次数提交，但应保证提交的完整性。</li><li>确保遵守编码规范。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="编码规范"></a>编码规范<a class="hash-link" href="#编码规范" title="Direct link to heading">#</a></h2><ul><li>使用linux换行符。</li><li>缩进（包含空行）和上一行保持一致。</li><li>类声明后与下面的变量或方法之间需要空一行。</li><li>不应有无意义的空行。请提炼私有方法，代替方法体过长或代码段逻辑闭环而采用的空行间隔。</li><li>类、方法和变量的命名要做到顾名思义，避免使用缩写。</li><li>返回值变量使用<code>result</code>命名；循环中使用<code>each</code>命名循环变量；map中使用<code>entry</code>代替<code>each</code>。</li><li>配置文件使用<code>Spinal Case</code>命名（一种使用<code>-</code>分割单词的特殊<code>Snake Case</code>）。</li><li>需要注释解释的代码尽量提成小方法，用方法名称解释。</li><li><code>equals</code>和<code>==</code>条件表达式中，常量在左，变量在右；大于小于等条件表达式中，变量在左，常量在右。</li><li>除了构造器入参与全局变量名称相同的赋值语句外，避免使用<code>this</code>修饰符。</li><li>除了用于继承的抽象类之外，尽量将类设计为<code>final</code>。</li><li>嵌套循环尽量提成方法。</li><li>成员变量定义顺序以及参数传递顺序在各个类和方法中保持一致。</li><li>优先使用卫语句。</li><li>类和方法的访问权限控制为最小。</li><li>方法所用到的私有方法应紧跟该方法，如果有多个私有方法，书写私有方法应与私有方法在原方法的出现顺序相同。</li><li>方法入参和返回值不允许为<code>null</code>。</li><li>优先使用三目运算符代替if else的返回和赋值语句。</li><li>优先考虑使用<code>LinkedList</code>，只有在需要通过下标获取集合中元素值时再使用<code>ArrayList</code>。</li><li><code>ArrayList</code>，<code>HashMap</code>等可能产生扩容的集合类型必须指定集合初始大小，避免扩容。</li><li>日志与注释一律使用英文。</li><li>注释只能包含javadoc，todo和fixme。</li><li>公开的类和方法必须有javadoc，其他类和方法以及覆盖自父类的方法无需javadoc。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="单元测试规范"></a>单元测试规范<a class="hash-link" href="#单元测试规范" title="Direct link to heading">#</a></h2><ul><li>测试代码和生产代码需遵守相同代码规范。</li><li>单元测试需遵循AIR（Automatic, Independent, Repeatable）设计理念。<ul><li>自动化（Automatic）：单元测试应全自动执行，而非交互式。禁止人工检查输出结果，不允许使用<code>System.out</code>，<code>log</code>等，必须使用断言进行验证。</li><li>独立性（Independent）：禁止单元测试用例间的互相调用，禁止依赖执行的先后次序。每个单元测试均可独立运行。</li><li>可重复执行（Repeatable）：单元测试不能受到外界环境的影响，可以重复执行。</li></ul></li><li>单元测试需遵循BCDE（Border, Correct, Design, Error）设计原则。<ul><li>边界值测试（Border）：通过循环边界、特殊数值、数据顺序等边界的输入，得到预期结果。</li><li>正确性测试（Correct）：通过正确的输入，得到预期结果。</li><li>合理性设计（Design）：与生产代码设计相结合，设计高质量的单元测试。</li><li>容错性测试（Error）：通过非法数据、异常流程等错误的输入，得到预期结果。</li></ul></li><li>如无特殊理由，测试需全覆盖。</li><li>每个测试用例需精确断言。</li><li>准备环境的代码和测试代码分离。</li><li>只有junit <code>Assert</code>，hamcrest <code>CoreMatchers</code>，Mockito相关可以使用static import。</li><li>单数据断言，应使用<code>assertTrue</code>，<code>assertFalse</code>，<code>assertNull</code>和<code>assertNotNull</code>。</li><li>多数据断言，应使用<code>assertThat</code>。</li><li>精确断言，尽量不使用<code>not</code>，<code>containsString</code>断言。</li><li>测试用例的真实值应名为为actualXXX，期望值应命名为expectedXXX。</li><li>测试类和<code>@Test</code>标注的方法无需javadoc。</li></ul><p><strong>以上内容参考了<a href="https://shardingsphere.apache.org/community/cn/contribute/code-conduct/" target="_blank" rel="noopener noreferrer">Apache ShardingSphere的编码指南</a>，并做了适当调整。</strong></p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/apache/incubator-shenyu-website/edit/main/i18n/zh/1-code-conduct.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑本文档</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-09-12T07:35:49.000Z">2021/9/12</time></b> by <b>Sinsy</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh/community/subscribe-email"><div class="pagination-nav__sublabel">上一篇</div><div class="pagination-nav__label">« 订阅邮件</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/community/issue-pr"><div class="pagination-nav__sublabel">下一篇</div><div class="pagination-nav__label">问题及提交请求 »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#开发理念" class="table-of-contents__link">开发理念</a></li><li><a href="#代码提交行为规范" class="table-of-contents__link">代码提交行为规范</a></li><li><a href="#编码规范" class="table-of-contents__link">编码规范</a></li><li><a href="#单元测试规范" class="table-of-contents__link">单元测试规范</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ShenYu</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh/docs/index">文档</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/news">新闻</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/blog">博客</a></li><li class="footer__item"><a href="https://github.com/apache/incubator-shenyu/releases" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>版本<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh/community/subscribe-email">社区</a></li><li class="footer__item"><a href="https://github.com/apache/incubator-shenyu" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-shenyu/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Issue Tracker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">订阅邮件组</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh/community/subscribe-email">如何定阅</a></li><li class="footer__item"><a href="mailto://dev-subscribe@shenyu.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>订阅邮件<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://lists.apache.org/list.html?dev@shenyu.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>邮件归档<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div><img style="height:50px" alt="Apache Software Foundation" src="/img/incubator-logo.png"><p style="color:#ffffffcf;font-size:14px;text-align:left">Apache ShenYu is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p>
      <p style="color:white;font-size:14px;"> Copyright © 2021 The Apache Software Foundation. Licensed under the Apache License, Version 2.0. Apache ShenYu, Apache Incubator, Apache, the Apache feather logo, the Apache ShenYu logo and the Apache Incubator project logo are trademarks of The Apache Software Foundation.</p>
      <div></div></div></div></div></div></footer></div>
<script src="/zh/assets/js/runtime~main.22032180.js"></script>
<script src="/zh/assets/js/main.fac650fc.js"></script>
</body>
</html>